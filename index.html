<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>북카페 도장 쿠폰</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- 로그인 페이지 -->
    <div id="loginPage" class="page active">
        <div class="container">
            <div class="logo-section">
                <div class="logo-icon">
                    <svg viewBox="0 0 100 100" class="book-coffee-icon">
                        <!-- 책 아이콘 -->
                        <rect x="15" y="25" width="35" height="50" rx="2" fill="#5D7052"/>
                        <rect x="20" y="30" width="25" height="3" fill="#F5F0E8"/>
                        <rect x="20" y="37" width="25" height="3" fill="#F5F0E8"/>
                        <rect x="20" y="44" width="18" height="3" fill="#F5F0E8"/>
                        <!-- 커피컵 아이콘 -->
                        <ellipse cx="70" cy="45" rx="18" ry="6" fill="#8B7355"/>
                        <path d="M52 45 L56 75 L84 75 L88 45" fill="#A68B5B"/>
                        <ellipse cx="70" cy="75" rx="14" ry="4" fill="#8B7355"/>
                        <!-- 커피컵 손잡이 -->
                        <path d="M88 50 Q98 50 98 60 Q98 70 88 70" stroke="#A68B5B" stroke-width="4" fill="none"/>
                    </svg>
                </div>
                <h1 class="shop-name">북카페 도장 쿠폰</h1>
                <p class="shop-desc">10개 적립시 무료 음료 1잔</p>
            </div>

            <form id="loginForm" class="login-form">
                <div class="input-group">
                    <label for="customerName">이름</label>
                    <input type="text" id="customerName" placeholder="이름을 입력해주세요" required>
                </div>
                <div class="input-group">
                    <label for="customerPhone">휴대폰 번호</label>
                    <input type="tel" id="customerPhone" placeholder="010-0000-0000" required>
                </div>
                <button type="submit" class="btn btn-primary">도장 확인하기</button>
            </form>

            <p class="privacy-notice">* 적립 확인을 위한 정보이며, 다른 용도로 사용되지 않습니다.</p>
        </div>
    </div>

    <!-- 도장 확인 페이지 -->
    <div id="stampPage" class="page">
        <div class="container">
            <div class="header">
                <button id="backBtn" class="btn-back">
                    <svg viewBox="0 0 24 24" width="24" height="24">
                        <path d="M15 18l-6-6 6-6" stroke="currentColor" stroke-width="2" fill="none"/>
                    </svg>
                </button>
                <h2 class="page-title">내 도장 현황</h2>
            </div>

            <div class="user-info">
                <span id="displayName" class="user-name"></span>님
                <span class="welcome-text">환영합니다!</span>
            </div>

            <div class="stamp-card">
                <div class="stamp-card-header">
                    <span class="stamp-count"><span id="currentStamps">0</span> / 10</span>
                    <span class="stamp-label">도장</span>
                </div>
                <div class="stamp-grid" id="stampGrid">
                    <!-- 도장 10개 동적 생성 -->
                </div>
                <div class="stamp-reward">
                    <span class="reward-icon">☕</span>
                    <span class="reward-text">10개 완성시 무료 음료!</span>
                </div>
            </div>

            <!-- 쿠폰 보유 현황 -->
            <div class="coupon-display" onclick="openCouponPopup()">
                <span class="coupon-label">보유 쿠폰</span>
                <span class="coupon-count" id="couponCount">0</span>
                <span class="coupon-unit">개</span>
                <span class="coupon-hint">탭하여 사용</span>
            </div>

            <button id="addStampBtn" class="btn btn-stamp">도장 찍기</button>
        </div>
    </div>

    <!-- 도장 찍기 모달 (직원 암호 입력) -->
    <div id="staffModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>직원 확인</h3>
                <button id="closeModal" class="btn-close">&times;</button>
            </div>
            <div class="modal-body">
                <p class="modal-desc">직원 암호를 입력해주세요</p>
                <!-- 도장 수 선택 -->
                 <div class="stamp-count-selector">
                    <label for="stampCount">찍을 도장 수:</label>
                    <select id="stampCount">
                        <option value="1">1개</option>
                        <option value="2">2개</option>        
                        <option value="3">3개</option>        
                        <option value="4">4개</option>        
                        <option value="5">5개</option>        
                        <option value="6">6개</option>        
                        <option value="7">7개</option>        
                        <option value="8">8개</option>        
                        <option value="9">9개</option>        
                        <option value="10">10개</option>    
                    </select>
                </div>
                <input type="password" id="staffPassword" class="staff-input" placeholder="암호 입력">
                <div id="passwordError" class="error-message"></div>
            </div>
            <div class="modal-footer">
                <button id="confirmStamp" class="btn btn-primary">도장 찍기</button>
            </div>
        </div>
    </div>

    <!-- 완료 알림 모달 -->
    <div id="successModal" class="modal">
        <div class="modal-content success-modal">
            <div class="success-icon">
                <svg viewBox="0 0 24 24" width="60" height="60">
                    <circle cx="12" cy="12" r="11" fill="#5D7052"/>
                    <path d="M7 12l3 3 7-7" stroke="white" stroke-width="2" fill="none"/>
                </svg>
            </div>
            <h3 id="successTitle">도장이 찍혔습니다!</h3>
            <p id="successMessage"></p>
            <button id="closeSuccessModal" class="btn btn-primary">확인</button>
        </div>
    </div>

    <!-- 로딩 오버레이 -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-spinner"></div>
        <p>처리 중...</p>
    </div>

    <script src="script.js"></script>
    <!-- ========== v2.0 쿠폰 사용 팝업 ========== -->
    <div id="couponPopup" class="popup-overlay" style="display: none;">
    <div class="popup-content">
        <h3>쿠폰 사용</h3>
        <p>쿠폰 1개를 사용하시겠습니까?</p>
        <p class="coupon-info">현재 보유 쿠폰: <span id="currentCouponCount">0</span>개</p>

        <div class="staff-verify">
            <label for="couponStaffPassword">직원 확인 암호:</label>
            <input type="password" id="couponStaffPassword" placeholder="직원 암호 입력">
        </div>

        <div class="popup-buttons">
            <button onclick="useCoupon()" class="btn-confirm">쿠폰 사용</button>
            <button onclick="closeCouponPopup()" class="btn-cancel">취소</button>
        </div>
    </div>
</div>
<!-- ========== v2.0 쿠폰 사용 팝업 끝 ========== -->
</body>
</html>
